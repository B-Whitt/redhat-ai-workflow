# Cve Fix

Automatically fix CVE vulnerabilities in Python dependencies.

## Instructions

```text
skill_run("cve_fix", '{"downstream_component": "", "repo": "", "repo_name": "", "dry_run": "", "max_cves": ""}')
```

## What It Does

Automatically fix CVE vulnerabilities in Python dependencies.

Workflow:
1. Query Jira for CVEs with downstream component "automation-analytics-backend"
2. Filter to CVEs not already fixed (no commit mentioning CVE-XXXX in git log)
3. Assign to current user and set to In Progress
4. Create feature branch
5. Read Python version from original Pipfile's [requires] section
6. Create temp pipenv in /tmp with that Python version
7. Install the vulnerable package (latest version) into temp pipenv
8. Extract new version and hashes from temp Pipfile.lock
9. Update original Pipfile: add/update package with >= version constraint
10. Update original Pipfile.lock: update version and hashes
11. Commit both Pipfile and Pipfile.lock changes
12. Create MR with CVE details
13. Add GitLab MR link to Jira issue

Uses MCP tools: jira_search, jira_assign, jira_transition, jira_add_comment,
git_branch_create, git_commit, git_push, gitlab_mr_create

## Parameters

| Parameter | Description | Required |
|-----------|-------------|----------|
| `downstream_component` | Downstream component name to filter CVEs (default: automation-analytics-backend) | No |
| `repo` | Repository path - if not provided, resolved from config | No |
| `repo_name` | Repository name from config (default: automation-analytics-backend) | No |
| `dry_run` | Show what would be done without making changes | No |
| `max_cves` | Maximum number of CVEs to process (default: 1 at a time) (default: 1) | No |
